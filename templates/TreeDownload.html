$def with (transmissionnum)
$if None:
	$# 
	$# Copyright 2010 University of Southern California
	$# 
	$# Licensed under the Apache License, Version 2.0 (the "License");
	$# you may not use this file except in compliance with the License.
	$# You may obtain a copy of the License at
	$# 
	$#    http://www.apache.org/licenses/LICENSE-2.0
	$# 
	$# Unless required by applicable law or agreed to in writing, software
	$# distributed under the License is distributed on an "AS IS" BASIS,
	$# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	$# See the License for the specific language governing permissions and
	$# limitations under the License.
	$#
$if not transmissionnum:
	$ transmissionnum = ''
$if not version:
	$ vsuffix = ''
$else:
	$ vsuffix = version
<div>
	<h3>Status</h3>
	<table>
		<tr>
			<td class="applet">
				<OBJECT codetype="application/java" NAME="TagFileDownloader" classid="java:edu.isi.misd.tagfiler.TagFilerDownloadApplet" CODEBASE="/tagfiler/static"
				 ARCHIVE="isi-misd-tagfiler-upload.jar,apache-mime4j-0.6.jar,commons-codec-1.4.jar,commons-logging-1.1.1.jar,httpclient-4.0.3.jar,httpcore-4.0.1.jar,httpmime-4.0.3.jar,jakarta-commons-httpclient-3.1.jar,jsse.jar,plugin.jar,json-org.jar"
				  width=25 height=25 >
				<PARAM name="MAYSCRIPT" VALUE="true">
				<PARAM name="tagfiler.server.url" value="${home}"/>
				<PARAM name="tagfiler.server.transmissionnum" value="${transmissionnum}"/>
				<PARAM name="tagfiler.server.version" value="${vsuffix}"/>
				<PARAM name="classloader_cache" value="false" />
				<PARAM name="separate_jvm" value="true" />
				$if appletTestProperties:
					<PARAM name="tagfiler.applet.test" value="${appletTestProperties}"/>
				$if appletLogfile:
					<PARAM name="tagfiler.applet.log" value="${appletLogfile}"/>
				$if appletCustomProperties:
					<PARAM name="custom.properties" value="${appletCustomProperties}"/>
				$if clientConnections:
					<PARAM name="tagfiler.connections" value="${clientConnections}"/>
				$if clientDownloadChunks:
					<PARAM name="tagfiler.allow.chunks" value="${clientDownloadChunks}"/>
				$if clientSocketBufferSize:
					<PARAM name="tagfiler.socket.buffer.size" value="${clientSocketBufferSize}"/>
				$if clientChunkbytes:
					<PARAM name="tagfiler.chunkbytes" value="${clientChunkbytes}"/>
				$if clientSocketTimeout:
					<PARAM name="tagfiler.client.socket.timeout" value="${clientSocketTimeout}"/>
				$if clientRetryCount:
					<PARAM name="tagfiler.retries" value="${clientRetryCount}"/>
				<hr><b>You must have Java-enabled browser (JRE 1.5+) to run the TagFiler Applet.
				  Download JRE 1.5 for your system from the following link:</b><br/>
				<a href="http://www.java.com/en/download/manual.jsp">http://www.java.com/en/download/manual.jsp</a><br/><hr>
				</OBJECT>
			</td>
			<td>
				<table>
					<tr>
						<td class="status-wrapper" id="Status"><b>Click "Update" to fill the form</b></td>
					</tr>
					<tr>
						<td>
							<table class="table-border">
								<tr>
									<td id="ProgressBar">
									$for i in 'Click a "Submit" button to begin file download':
										&nbsp;
									</td>
								</tr>
							</table>
						</td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
</div>
<div>
	<h3>Dataset</h3>
	<table>
		<tr>
			<td>
				<table class="table-wrapper" rules="all" >
					<tr>
						<td class="tag-name">Name</td>
						$ params = dict(type='text', id='TransmissionNumber', disabled='disabled', val=transmissionnum)
						$:{render.TagValueForm(params)}
					</tr>
					<tr>
						<td class="tag-name">Version</td>
						$ params = dict(type='text', id='Version', disabled='disabled', val=vsuffix)
						$:{render.TagValueForm(params)}
					</tr>
				</table>	
			</td>
			<td>
				<button id="UpdateButton" type="button" name="Update" disabled="disabled" onclick="getDatasetInfo()" >Update</button>
			</td>
		</tr>
	</table>
</div>
<div>
	<h3>Destination Directory for Download</h3>
	<table>
		<tr>
			<td class="directory" id="DestinationDirectory">
				$for i in range(20):
					&nbsp;
			</td>
			<td>
				<button type="button" name="Browse" id="Browse" value="" disabled="disabled" onclick="downloadBrowse()" >Browse</button>
			</td>
		</tr>
	</table>
</div>
<div>
	<h3>Checksum</h3>
	<input type="checkbox" id="cksum" name="cksum" value="on" checked="checked" />Verify
</div>
<div>
	<h3>Submit</h3>
	<button type="button" name="Download Files" id="Download Files" disabled="disabled" onclick="downloadFiles('all')" >Download Files</button>
	<button type="button" name="Resume" id="Resume" style="visibility: hidden;" onclick="downloadFiles('resume')" >Resume</button>
</div>
<div>
	<h3>Study Tags</h3>
	<table>
	<tr>
	<td>
	<div id="Required Tags">
	<table class="table-wrapper" rules="all" id="Dataset Tags">
	$ tagdefs = tagdefsdict.values()
	$ tagdefs.sort(key=lambda tagdef: tagdef.tagname)
	$for tagdef in tagdefs:
		<tr>
		<td class="tag-name">${tagdef.tagname}</td>
		$ params = dict(type='text', name=tagdef.tagname , id='%s_val' % tagdef.tagname, readonly='readonly', val='')
		$:{render.TagValueForm(params)}
		</tr>
	</table>
	</div>
	</td>
	</tr>
	</table>
</div>
<div>
	<h3>File(s) that will be downloaded</h3>
	<table class="file-list">
		<tr>
			<td class="text-tree" id="Files">
			$for i in 'File(s) that will be downloaded':
				&nbsp;
			</td>
		</tr>
	</table>
</div>
