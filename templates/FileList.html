$def with (target, files, quote)
$if len(files) > 0:
	$for name, local, writeok in files:
		$ tags = []
		$if local:
			$ tags.append( '<a href="%s/file/%s">Download</a>' % (target, quote(name)) )
		$else:
			$ tags.append( '<a href="%s/file/%s">View</a>' % (target, quote(name)) )
		$ tags.append( '<a href="%s/tags/%s">View or set tags</a>' % (target, quote(name)) )
		$if writeok:
			$ tags += [ '<a href="%s/file/%s?action=define&amp;type=file">Update via file</a>' % (target, quote(name)), '<a href="%s/file/%s?action=define&amp;type=url">Update via URL</a>' % (target, quote(name)) ]
		<fieldset>
		  <legend>${name}</legend>
		  <table>
		  <tr>
		  <td>
			  $:{', '.join(tags)}
		  </td>
		  <td>
		  <form enctype="application/x-www-form-urlencoded" action="${target}/file/${quote(name)}" method="post">
		    <div>
		    <input type="hidden" name="action" value="delete" />
		    $if writeok:
		    	<input type="submit" value="Delete" />
		    </div>
		  </form>
		      </td>
		    </tr>
		  </table>
		</fieldset>
$else:
	<p>There are no files to list.</p>
