$def with (files, showversions=False, limit=None)
$if None:
	$# 
	$# Copyright 2010 University of Southern California
	$# 
	$# Licensed under the Apache License, Version 2.0 (the "License");
	$# you may not use this file except in compliance with the License.
	$# You may obtain a copy of the License at
	$# 
	$#    http://www.apache.org/licenses/LICENSE-2.0
	$# 
	$# Unless required by applicable law or agreed to in writing, software
	$# distributed under the License is distributed on an "AS IS" BASIS,
	$# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	$# See the License for the specific language governing permissions and
	$# limitations under the License.
	$#
$ odd = True
$if view:
	$ querystr = '?view=%s' % urlquote(view)
$else:
	$ querystr = ''
$if len(files) > 0:
	$if limit and limit == len(files):
		$ suffix = '?limit=none'
		$if view:
			$ suffix = suffix + '&view=%s' % view
		$if showversions:
			$ suffix = '%s&versions=any' % suffix
		$else:
			$ suffix = '%s&versions=latest' % suffix
		<p><b>Results limited to ${limit} matches.</b> <a href="${queryTarget}${suffix}">View all results.</a></p>
	<table class="file-list">
	<tr class="file-heading">
	$for tag in filelisttags:
		$if tag == 'id':
			<th class="file-tag subject">subject</th>
		$else:
			<th class="file-tag ${idquote(tag)}">${tag}</th>
	</tr>
	$for file in files:
		$if odd:
			<tr class="file odd">
		$else:
			<tr class="file even">
		$ odd = not odd
		$for tag in filelisttags:
			$if tagdefsdict.has_key(tag):
				<td class="file-tag ${idquote(tag)}">
				$:{render.FileTagValBlock(file, tagdefsdict[tag], filelisttagswrite, file.version, showversions)}
				</td>
		</tr>
	</table>
$else:
	<p>There are no items to list with your current privileges.</p>
