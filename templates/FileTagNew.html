$def with (tvars)
$ title = tvars.get('title')
$ apptarget = tvars.get('apptarget')
$ tagspace = tvars.get('tagspace')
$ data_id = tvars.get('data_id')
$ taginfo = tvars.get('taginfo')
$ typenames = tvars.get('typenames')
$ urlquote = tvars.get('urlquote')
$ idquote = tvars.get('idquote')
$ roleinfo = tvars.get('roleinfo')
$ excludes, tagdefs, tagdefsdict, tags, tagvals, length = taginfo
$ tagvals = dict( [ (tag, vals) for file, tag, vals in tagvals ] )
$ allroles = roleinfo
$ tagdefs = [ tagdef for tagdef in tagdefs if tagdef[0] not in excludes and tagdef[2] ]
$ odd = True
$if len(tagdefs) > 0:
	
$elif title == 'Set tags':
	<h2>Notice</h2>
	<p>You cannot annotate this file until tag definitions are created.</p>
$elif title == 'Add an authorized user':
	<h2>Notice</h2>
	<p>There are no ACLs available for you to manage.</p>
