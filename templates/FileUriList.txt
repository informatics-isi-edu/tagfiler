$def with (tvars)
$ target = tvars.get('apptarget')
$ files = tvars.get('files')
$ urlquote = tvars.get('urlquote')
$# the following nonsense line is due to a bug in the template engine... don't know why it works but it does!
$for foo in [ 0 ]:
$code
	def renderfiles(files):
		s = ""
		for name, local, authz, imgset, downloaded in files:
			s += target + "/file/" + urlquote(name) + "\n"
		return s
${renderfiles(files)[:-1]}
