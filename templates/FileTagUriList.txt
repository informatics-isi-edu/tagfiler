$def with (tvars)
$ target = tvars.get('target')
$ taginfo = tvars.get('taginfo')
$ urlquote = tvars.get('urlquote')
$# the following nonsense line is due to a bug in the template engine... don't know why it works but it does!
$for foo in [ 0 ]:
$code
	def rendertagvals(filetagvals):
		s = ""
		for file, tag, vals in filetagvals:
			if len(vals) > 0:
				for val in vals:
					s += target + "/tags/" + urlquote(file) + "/" + urlquote(tag) + "=" + urlquote(val) + "\n"
			else:
				s += target + "/tags/" + urlquote(file) + "/" + urlquote(tag) + "\n"
		return s
${rendertagvals(taginfo[4])[:-1]}
